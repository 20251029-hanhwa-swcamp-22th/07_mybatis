<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!--
    Mapper Interface와 Mapper XML을 연동하는 방법
    1. interface(Java 폴더)와 XML(Resources)이 동일한 경로에 같은 이름으로 존재
    2. interface의 풀 네임 (패키지명 + 인터페이스 명)을 namespace에 작성
    3. interface의 method 명과 xml의 sql id, return type을 동일하게 작성
-->
<mapper namespace="com.mycompany.section03.remix.MenuMapper">

    <select id = "selectAllMenu" resultType="MenuDTO">
        select
            menu_code,
            menu_name,
            menu_price,
            category_code,
            orderable_status
        from
            tbl_menu
        where
            orderable_status = 'Y'
        order by
            menu_code asc
    </select>

    <select id = "selectMenuByMenuCode" resultType="MenuDTO">
        select
            menu_code,
            menu_name,
            menu_price,
            category_code,
            orderable_status
        from
            tbl_menu
        where
            menu_code = #{menuCode}
    </select>

    <insert id = "insertMenu" parameterType="MenuDTO">
        insert into
            tbl_menu(menu_name, menu_price, category_code, orderable_status)
        values
            ( #{menuName},#{menuPrice},#{categoryCode},'Y')
    </insert>

    <update id="updateMenu" parameterType="MenuDTO">
        UPDATE
            tbl_menu
        SET
            menu_name = #{ menuName },
            menu_price = #{ menuPrice },
            category_code = #{ categoryCode }
        WHERE
            menu_code = #{ menuCode }
    </update>

    <!-- parameterType은 optional(선택적) 속성으로,
        작성되지 않으면 Mybatis의 TypeHandler가 알아서 추론함
    -->
    <delete id="deleteMenu">
        delete
        from
            tbl_menu
        where
            menu_code = #{menuCode}
    </delete>

</mapper>